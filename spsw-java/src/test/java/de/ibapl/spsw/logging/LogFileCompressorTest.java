/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package net.sf.atmodem4j.spsw.logging;

import java.io.ByteArrayOutputStream;
import java.io.FileOutputStream;
import org.junit.After;
import org.junit.AfterClass;
import org.junit.Before;
import org.junit.BeforeClass;
import org.junit.Test;
import static org.junit.Assert.*;

/**
 *
 * @author aploese
 */
public class LogFileCompressorTest {

    public LogFileCompressorTest() {
    }

    @BeforeClass
    public static void setUpClass() {
    }

    @AfterClass
    public static void tearDownClass() {
    }

    @Before
    public void setUp() {
    }

    @After
    public void tearDown() {
    }

    /**
     * Test of logOpend method, of class LogFileCompressor.
     */
    @Test
    public void testCompress() throws Exception {
        System.out.println("Compress");
        ByteArrayOutputStream os = new ByteArrayOutputStream();
        LogFileCompressor instance = new LogFileCompressor(LogFileCompressorTest.class.getResourceAsStream("testRead_ttyUSB1.txt"), os);
        assertArrayEquals(new String[]{"OP @2015-06-16 17:52:36.778 778 Raw()",
            "RS @2015-06-16 17:52:36.799",
            "TS @2015-06-16 17:52:36.849",
            "TX @2015-06-16 17:52:36.852 (     3) [ 68 0b 0b 68 53 fd 52 ff ff ff ff ff ff ff ff 9a 16]",
            "FL @2015-06-16 17:52:36.871",
            "RX @2015-06-16 17:52:36.941 (   142) e5",
            "RS @2015-06-16 17:52:36.951",
            "TS @2015-06-16 17:52:37.059",
            "TX @2015-06-16 17:52:37.061 (     2) [ 10 7b fd 78 16]",
            "FL @2015-06-16 17:52:37.072",
            "RX @2015-06-16 17:52:37.815 (   864) [ 68 58 58 68 08 1f 72 00 00 00 00 0c 4e 24 07 95 30 00 00 0c 00 00 02 00 00 8c 10 00 00 00 00 00 8c 20 00 00 02 00 00 3b 3b dd bd eb 0b 26 57 51 00 02 5a 00 00 02 66 00 00 04 6d 00 00 00 16 4c 00 00 00 00 00 cc 10 00 00 00 00 00 cc 20 00 00 00 00 00 42 6c 00 00 42 ec 7e 1d 00 00 16]",
            "RS @2015-06-16 17:52:37.817",
            "TS @2015-06-16 17:52:39.621",
            "TX @2015-06-16 17:52:39.624 (     3) [ 10 7b fd 78 16]",
            "FL @2015-06-16 17:52:39.629",
            "RX @2015-06-16 17:52:40.130 (  2313) [ 68 58 58 68 08 00 00 2d 02 00 00 0c 4e 24 07 00 00 00 00 0c 00 00 00 00 00 8c 10 00 00 00 00 00 8c 20 00 00 00 00 00 3b 3b dd bd eb 0b 26 00 00 00 02 5a 00 00 02 66 bd 00 04 6d 00 00 f0 16 4c 00 00 00 00 00 cc 10 00 00 00 00 00 cc 20 00 00 00 00 00 42 6c 00 00 42 ec 7e 00 00 00 00]",
            "RS @2015-06-16 17:52:40.133",
            "TS @2015-06-16 17:52:42.182",
            "TX @2015-06-16 17:52:42.185 (     3) [ 10 7b fd 78 16]",
            "FL @2015-06-16 17:52:42.189",
            "RX @2015-06-16 17:52:42.661 (  2528) [ 68 58 58 68 08 00 00 00 00 00 00 0c 4e 24 07 9b 30 00 00 0c 00 00 02 00 00 8c 10 00 00 00 00 00 8c 20 00 00 02 00 00 3b 3b dd bd eb 0b 26 57 00 00 02 5a 00 00 02 66 00 00 04 6d 00 00 00 16 4c 00 00 00 00 00 cc 10 00 00 00 00 00 cc 20 00 00 00 00 00 42 6c 00 00 42 ec 7e 1d 00 00 00]",
            "RS @2015-06-16 17:52:42.664",
            "TS @2015-06-16 17:52:44.757",
            "TX @2015-06-16 17:52:44.760 (     3) [ 68 0b 0b 68 53 fd 52 f0 ff ff ff ff ff ff ff 8b 16]",
            "FL @2015-06-16 17:52:44.770",
            "TS @2015-06-16 17:52:44.966",
            "TX @2015-06-16 17:52:44.968 (     2) [ 68 0b 0b 68 53 fd 52 f0 ff ff ff ff ff ff ff 8b 16]",
            "FL @2015-06-16 17:52:44.977",
            "TS @2015-06-16 17:52:45.173",
            "TX @2015-06-16 17:52:45.176 (     3) [ 68 0b 0b 68 53 fd 52 f0 ff ff ff ff ff ff ff 8b 16]",
            "FL @2015-06-16 17:52:45.185",
            "TS @2015-06-16 17:52:45.381",
            "TX @2015-06-16 17:52:45.384 (     3) [ 68 0b 0b 68 53 fd 52 f1 ff ff ff ff ff ff ff 8c 16]",
            "FL @2015-06-16 17:52:45.393",
            "TS @2015-06-16 17:52:45.589",
            "TX @2015-06-16 17:52:45.591 (     2) [ 68 0b 0b 68 53 fd 52 f1 ff ff ff ff ff ff ff 8c 16]",
            "FL @2015-06-16 17:52:45.600",
            "TS @2015-06-16 17:52:45.796",
            "TX @2015-06-16 17:52:45.799 (     3) [ 68 0b 0b 68 53 fd 52 f1 ff ff ff ff ff ff ff 8c 16]",
            "FL @2015-06-16 17:52:45.809",
            "TS @2015-06-16 17:52:46.006",
            "TX @2015-06-16 17:52:46.008 (     2) [ 68 0b 0b 68 53 fd 52 f2 ff ff ff ff ff ff ff 8d 16]",
            "FL @2015-06-16 17:52:46.017",
            "RX @2015-06-16 17:52:46.096 (  3432) e5",
            "RS @2015-06-16 17:52:46.099",
            "TS @2015-06-16 17:52:46.200",
            "TX @2015-06-16 17:52:46.203 (     3) [ 10 7b fd 78 16]",
            "FL @2015-06-16 17:52:46.208",
            "RX @2015-06-16 17:52:46.744 (   645) [ 68 58 58 68 08 0f 72 12 03 00 00 0c 4e 24 07 bc 30 00 00 0c 13 00 02 00 00 8c 10 13 00 00 00 00 8c 20 13 00 02 00 00 3b 3b dd bd eb 0b 26 54 35 00 02 5a cc 00 02 66 c6 00 04 6d 36 11 f0 16 4c 13 00 02 00 00 cc 10 13 00 00 00 00 cc 20 13 00 02 00 00 42 6c fd 15 42 ec 7e 1d 25 68 16]",
            "RS @2015-06-16 17:52:46.757",
            "TS @2015-06-16 17:52:46.767",
            "TX @2015-06-16 17:52:46.769 (     2) [ 68 0b 0b 68 53 fd 52 f3 ff ff ff ff ff ff ff 8e 16]",
            "FL @2015-06-16 17:52:46.778",
            "TS @2015-06-16 17:52:46.974",
            "TX @2015-06-16 17:52:46.977 (     3) [ 68 0b 0b 68 53 fd 52 f3 ff ff ff ff ff ff ff 8e 16]",
            "FL @2015-06-16 17:52:46.986",
            "TS @2015-06-16 17:52:47.182",
            "TX @2015-06-16 17:52:47.198 (    16) [ 68 0b 0b 68 53 fd 52 f3 ff ff ff ff ff ff ff 8e 16]",
            "FL @2015-06-16 17:52:47.207",
            "TS @2015-06-16 17:52:47.404",
            "TX @2015-06-16 17:52:47.406 (     2) [ 68 0b 0b 68 53 fd 52 f4 ff ff ff ff ff ff ff 8f 16]",
            "FL @2015-06-16 17:52:47.415",
            "TS @2015-06-16 17:52:47.611",
            "TX @2015-06-16 17:52:47.613 (     2) [ 68 0b 0b 68 53 fd 52 f4 ff ff ff ff ff ff ff 8f 16]",
            "FL @2015-06-16 17:52:47.622",
            "TS @2015-06-16 17:52:47.820",
            "TX @2015-06-16 17:52:47.823 (     3) [ 68 0b 0b 68 53 fd 52 f4 ff ff ff ff ff ff ff 8f 16]",
            "FL @2015-06-16 17:52:47.832",
            "TS @2015-06-16 17:52:48.028",
            "TX @2015-06-16 17:52:48.031 (     3) [ 68 0b 0b 68 53 fd 52 f5 ff ff ff ff ff ff ff 90 16]",
            "FL @2015-06-16 17:52:48.040",
            "TS @2015-06-16 17:52:48.237",
            "TX @2015-06-16 17:52:48.239 (     2) [ 68 0b 0b 68 53 fd 52 f5 ff ff ff ff ff ff ff 90 16]",
            "FL @2015-06-16 17:52:48.249",
            "TS @2015-06-16 17:52:48.449",
            "TX @2015-06-16 17:52:48.452 (     3) [ 68 0b 0b 68 53 fd 52 f5 ff ff ff ff ff ff ff 90 16]",
            "FL @2015-06-16 17:52:48.462",
            "TS @2015-06-16 17:52:48.664",
            "TX @2015-06-16 17:52:48.666 (     2) [ 68 0b 0b 68 53 fd 52 f6 ff ff ff ff ff ff ff 91 16]",
            "FL @2015-06-16 17:52:48.676",
            "TS @2015-06-16 17:52:48.872",
            "TX @2015-06-16 17:52:48.875 (     3) [ 68 0b 0b 68 53 fd 52 f6 ff ff ff ff ff ff ff 91 16]",
            "FL @2015-06-16 17:52:48.884",
            "TS @2015-06-16 17:52:49.083",
            "TX @2015-06-16 17:52:49.085 (     2) [ 68 0b 0b 68 53 fd 52 f6 ff ff ff ff ff ff ff 91 16]",
            "FL @2015-06-16 17:52:49.094",
            "TS @2015-06-16 17:52:49.291",
            "TX @2015-06-16 17:52:49.293 (     2) [ 68 0b 0b 68 53 fd 52 f7 ff ff ff ff ff ff ff 92 16]",
            "FL @2015-06-16 17:52:49.302",
            "TS @2015-06-16 17:52:49.498",
            "TX @2015-06-16 17:52:49.500 (     2) [ 68 0b 0b 68 53 fd 52 f7 ff ff ff ff ff ff ff 92 16]",
            "FL @2015-06-16 17:52:49.510",
            "TS @2015-06-16 17:52:49.708",
            "TX @2015-06-16 17:52:49.713 (     5) [ 68 0b 0b 68 53 fd 52 f7 ff ff ff ff ff ff ff 92 16]",
            "FL @2015-06-16 17:52:49.724",
            "TS @2015-06-16 17:52:49.922",
            "TX @2015-06-16 17:52:49.924 (     2) [ 68 0b 0b 68 53 fd 52 f8 ff ff ff ff ff ff ff 93 16]",
            "FL @2015-06-16 17:52:49.934",
            "TS @2015-06-16 17:52:50.129",
            "TX @2015-06-16 17:52:50.132 (     3) [ 68 0b 0b 68 53 fd 52 f8 ff ff ff ff ff ff ff 93 16]",
            "FL @2015-06-16 17:52:50.142",
            "TS @2015-06-16 17:52:50.338",
            "TX @2015-06-16 17:52:50.340 (     2) [ 68 0b 0b 68 53 fd 52 f8 ff ff ff ff ff ff ff 93 16]",
            "FL @2015-06-16 17:52:50.350",
            "TS @2015-06-16 17:52:50.550",
            "TX @2015-06-16 17:52:50.553 (     3) [ 68 0b 0b 68 53 fd 52 f9 ff ff ff ff ff ff ff 94 16]",
            "FL @2015-06-16 17:52:50.562",
            "RX @2015-06-16 17:52:50.641 (  3884) e5",
            "RS @2015-06-16 17:52:50.644",
            "TS @2015-06-16 17:52:50.744",
            "TX @2015-06-16 17:52:50.747 (     3) [ 10 7b fd 78 16]",
            "FL @2015-06-16 17:52:50.753",
            "RX @2015-06-16 17:52:51.247 (   603) [ 68 58 58 68 08 00 00 09 02 00 00 0c 4e 24 07 00 00 00 00 0c 14 20 00 00 00 8c 10 14 00 00 00 00 8c 20 14 20 00 00 00 3b 3b dd bd eb 0b 26 d3 51 00 02 5a d7 00 02 66 bd 00 04 6d 00 00 00 16 4c 14 00 00 00 00 cc 10 14 00 00 00 00 cc 20 14 00 00 00 00 42 6c df 1c 42 ec 7e ff 1c 00 00]",
            "RS @2015-06-16 17:52:51.249",
            "TS @2015-06-16 17:52:53.303",
            "TX @2015-06-16 17:52:53.306 (     3) [ 10 7b fd 78 16]",
            "FL @2015-06-16 17:52:53.310",
            "RX @2015-06-16 17:52:53.795 (  2546) [ 68 58 58 68 08 00 00 09 02 00 00 0c 4e 24 07 8e 30 00 00 0c 14 20 00 00 00 8c 10 14 00 00 00 00 8c 20 14 20 00 00 00 3b 3b dd bd eb 0b 26 d3 51 00 02 5a 00 00 02 66 b1 00 04 6d 00 00 00 16 4c 14 00 00 00 00 cc 10 14 00 00 00 00 cc 20 14 00 00 00 00 42 6c df 1c 42 ec 7e ff 1c 0d 16]",
            "RS @2015-06-16 17:52:53.798",
            "TS @2015-06-16 17:52:55.860",
            "TX @2015-06-16 17:52:55.862 (     2) [ 10 7b fd 78 16]",
            "FL @2015-06-16 17:52:55.867",
            "RX @2015-06-16 17:52:56.354 (  2556) [ 68 58 58 68 08 00 00 09 02 00 00 0c 4e 24 07 00 00 00 00 0c 14 20 00 00 00 8c 10 14 00 00 00 00 8c 20 14 20 00 00 00 3b 3b dd bd eb 0b 26 53 51 00 02 5a 00 00 02 66 b1 00 04 6d 00 00 00 16 4c 14 00 00 00 00 cc 10 14 00 00 00 00 cc 20 14 00 00 00 00 42 6c df 1c 42 ec 7e ff 1c 09 16]",
            "RS @2015-06-16 17:52:56.357",
            "TS @2015-06-16 17:52:58.425",
            "TX @2015-06-16 17:52:58.441 (    16) [ 68 0b 0b 68 53 fd 52 09 ff ff ff ff ff ff ff a4 16]",
            "FL @2015-06-16 17:52:58.450",
            "RX @2015-06-16 17:52:58.530 (  2173) e5",
            "RS @2015-06-16 17:52:58.533",
            "TS @2015-06-16 17:52:58.633",
            "TX @2015-06-16 17:52:58.635 (     2) [ 10 7b fd 78 16]",
            "FL @2015-06-16 17:52:58.640",
            "RX @2015-06-16 17:52:59.097 (   564) [ 68 58 58 68 08 10 72 09 02 00 00 0c 4e 24 07 9d 30 00 00 0c 14 20 00 00 00 8c 10 14 00 00 00 00 8c 20 14 20 00 00 00 3b 3b dd bd eb 0b 26 53 51 00 02 5a ce 00 02 66 b3 00 04 6d 04 16 f0 16 4c 14 75 02 00 00 cc 10 14 00 00 00 00 cc 20 14 75 02 00 00 42 6c df 1c 42 ec 7e ff 1c 0b 16]",
            "RS @2015-06-16 17:52:59.100",
            "TS @2015-06-16 17:52:59.111",
            "TX @2015-06-16 17:52:59.113 (     2) [ 68 0b 0b 68 53 fd 52 19 ff ff ff ff ff ff ff b4 16]",
            "FL @2015-06-16 17:52:59.122",
            "TS @2015-06-16 17:52:59.321",
            "TX @2015-06-16 17:52:59.323 (     2) [ 68 0b 0b 68 53 fd 52 19 ff ff ff ff ff ff ff b4 16]",
            "FL @2015-06-16 17:52:59.333",
            "TS @2015-06-16 17:52:59.529",
            "TX @2015-06-16 17:52:59.531 (     2) [ 68 0b 0b 68 53 fd 52 19 ff ff ff ff ff ff ff b4 16]",
            "FL @2015-06-16 17:52:59.540",
            "TS @2015-06-16 17:52:59.737",
            "TX @2015-06-16 17:52:59.739 (     2) [ 68 0b 0b 68 53 fd 52 29 ff ff ff ff ff ff ff c4 16]",
            "FL @2015-06-16 17:52:59.749",
            "TS @2015-06-16 17:52:59.945",
            "TX @2015-06-16 17:52:59.947 (     2) [ 68 0b 0b 68 53 fd 52 29 ff ff ff ff ff ff ff c4 16]",
            "FL @2015-06-16 17:52:59.957",
            "TS @2015-06-16 17:53:00.152",
            "TX @2015-06-16 17:53:00.155 (     3) [ 68 0b 0b 68 53 fd 52 29 ff ff ff ff ff ff ff c4 16]",
            "FL @2015-06-16 17:53:00.170",
            "TS @2015-06-16 17:53:00.367",
            "TX @2015-06-16 17:53:00.369 (     2) [ 68 0b 0b 68 53 fd 52 39 ff ff ff ff ff ff ff d4 16]",
            "FL @2015-06-16 17:53:00.379",
            "RX @2015-06-16 17:53:00.458 (  1358) e5",
            "RS @2015-06-16 17:53:00.461",
            "TS @2015-06-16 17:53:00.562",
            "TX @2015-06-16 17:53:00.565 (     3) [ 10 7b fd 78 16]",
            "FL @2015-06-16 17:53:00.570",
            "RX @2015-06-16 17:53:01.031 (   570) [ 68 58 58 68 08 18 72 39 06 00 00 0c 4e 24 07 8f 30 00 00 0c 14 20 00 00 00 8c 10 14 00 00 00 00 8c 20 14 20 00 00 00 3b 3b dd bd eb 0b 26 86 53 00 02 5a d7 00 02 66 bf 00 04 6d 37 11 f0 16 4c 14 20 00 00 00 cc 10 14 00 00 00 00 cc 20 14 20 00 00 00 42 6c df 1c 42 ec 7e ff 1c 03 16]",
            "TS @2015-06-16 17:53:01.039",
            "RS @2015-06-16 17:53:01.042",
            "TX @2015-06-16 17:53:01.042 (     3) [ 68 0b 0b 68 53 fd 52 49 ff ff ff ff ff ff ff e4 16]",
            "FL @2015-06-16 17:53:01.055",
            "TS @2015-06-16 17:53:01.251",
            "TX @2015-06-16 17:53:01.253 (     2) [ 68 0b 0b 68 53 fd 52 49 ff ff ff ff ff ff ff e4 16]",
            "FL @2015-06-16 17:53:01.261",
            "TS @2015-06-16 17:53:01.457",
            "TX @2015-06-16 17:53:01.459 (     2) [ 68 0b 0b 68 53 fd 52 49 ff ff ff ff ff ff ff e4 16]",
            "FL @2015-06-16 17:53:01.468",
            "TS @2015-06-16 17:53:01.664",
            "TX @2015-06-16 17:53:01.666 (     2) [ 68 0b 0b 68 53 fd 52 59 ff ff ff ff ff ff ff f4 16]",
            "FL @2015-06-16 17:53:01.675",
            "TS @2015-06-16 17:53:01.871",
            "TX @2015-06-16 17:53:01.873 (     2) [ 68 0b 0b 68 53 fd 52 59 ff ff ff ff ff ff ff f4 16]",
            "FL @2015-06-16 17:53:01.882",
            "TS @2015-06-16 17:53:02.077",
            "TX @2015-06-16 17:53:02.080 (     3) [ 68 0b 0b 68 53 fd 52 59 ff ff ff ff ff ff ff f4 16]",
            "FL @2015-06-16 17:53:02.095",
            "TS @2015-06-16 17:53:02.292",
            "TX @2015-06-16 17:53:02.294 (     2) [ 68 0b 0b 68 53 fd 52 69 ff ff ff ff ff ff ff 04 16]",
            "FL @2015-06-16 17:53:02.303",
            "TS @2015-06-16 17:53:02.498",
            "TX @2015-06-16 17:53:02.501 (     3) [ 68 0b 0b 68 53 fd 52 69 ff ff ff ff ff ff ff 04 16]",
            "FL @2015-06-16 17:53:02.510",
            "TS @2015-06-16 17:53:02.706",
            "TX @2015-06-16 17:53:02.708 (     2) [ 68 0b 0b 68 53 fd 52 69 ff ff ff ff ff ff ff 04 16]",
            "FL @2015-06-16 17:53:02.717",
            "TS @2015-06-16 17:53:02.913",
            "TX @2015-06-16 17:53:02.915 (     2) [ 68 0b 0b 68 53 fd 52 79 ff ff ff ff ff ff ff 14 16]",
            "FL @2015-06-16 17:53:02.923",
            "TS @2015-06-16 17:53:03.119",
            "TX @2015-06-16 17:53:03.121 (     2) [ 68 0b 0b 68 53 fd 52 79 ff ff ff ff ff ff ff 14 16]",
            "FL @2015-06-16 17:53:03.130",
            "TS @2015-06-16 17:53:03.325",
            "TX @2015-06-16 17:53:03.327 (     2) [ 68 0b 0b 68 53 fd 52 79 ff ff ff ff ff ff ff 14 16]",
            "FL @2015-06-16 17:53:03.336",
            "TS @2015-06-16 17:53:03.532",
            "TX @2015-06-16 17:53:03.539 (     7) [ 68 0b 0b 68 53 fd 52 89 ff ff ff ff ff ff ff 24 16]",
            "FL @2015-06-16 17:53:03.549",
            "TS @2015-06-16 17:53:03.744",
            "TX @2015-06-16 17:53:03.746 (     2) [ 68 0b 0b 68 53 fd 52 89 ff ff ff ff ff ff ff 24 16]",
            "FL @2015-06-16 17:53:03.756",
            "TS @2015-06-16 17:53:03.951",
            "TX @2015-06-16 17:53:03.953 (     2) [ 68 0b 0b 68 53 fd 52 89 ff ff ff ff ff ff ff 24 16]",
            "FL @2015-06-16 17:53:03.962",
            "TS @2015-06-16 17:53:04.158",
            "TX @2015-06-16 17:53:04.160 (     2) [ 68 0b 0b 68 53 fd 52 99 ff ff ff ff ff ff ff 34 16]",
            "FL @2015-06-16 17:53:04.169",
            "TS @2015-06-16 17:53:04.364",
            "TX @2015-06-16 17:53:04.366 (     2) [ 68 0b 0b 68 53 fd 52 99 ff ff ff ff ff ff ff 34 16]",
            "FL @2015-06-16 17:53:04.376",
            "TS @2015-06-16 17:53:04.571",
            "TX @2015-06-16 17:53:04.573 (     2) [ 68 0b 0b 68 53 fd 52 99 ff ff ff ff ff ff ff 34 16]",
            "FL @2015-06-16 17:53:04.582",
            "RX @2015-06-16 17:53:09.783 (  8741) -1",
            "CL @2015-06-16 17:53:09.787"}, os.toString().split("\n"));
    }
}
